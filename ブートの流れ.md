https://www.youtube.com/watch?v=DV5S_ZSdK0s

# ROM Code
ブートには２種類ある。
* メモリブート  
フラッシュメモリなどの記憶媒体から、初期化コード起動する。cold/warm reset 後に行われる。

*  ペリフェラルブート  
UART、USB、Ethernetなどを使い、実行コードを持ってくる方式。デバイスをフラッシュする場合などに使う。

## デバイスタイプ
デバイスには２種類ある。
セキュアブートかどうかに関係しており、イメージのフォーマットも変わってくる。

* high secure device(HS)  
認証されてない実行コードは許可しない。

* general-purpose device(GP)  
実行コードに対する認証を行わない

## アーキテクチャ
ROMコードのアーキテクチャは以下のとおり。

* ハイレベルレイヤ  
ROMコードのメインタスクであり、watchdog timer やクロックの設定、ブートルーチンが含まれる。

* ドライバレイヤ  
ハイレベルレイヤとデバイスが通信するためのAPI、プロトコルの実装

* HAL 
実際のハードウェアとやりとりするための低いレベルなコード



# 補足
## HALとデバイスドライバの違い
* HAL  
プロセッサの違いを吸収するためのレイヤ。
レジスタ、タイマ、DMA、割り込みなど、プロセッサごとの機能へのアクセスを抽象化する。
ドライバはHALに処理を依頼し、HALは、プロセッサに応じた処理を行う。
https://sciencepark.co.jp/device_driver/dvdr/report-8/

とはいえ、ここを見ると、ドライバの上にHALを置く場合もあるようだ。
https://stackoverflow.com/questions/13577660/define-hal-above-or-below-driver-layer

