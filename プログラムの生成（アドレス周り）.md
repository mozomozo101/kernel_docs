

こういう内容の hello.c

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

int main() {
        int i;
        char *p;

        printf("hello. pid=%d\n", getpid());

        p = malloc(1024*1024);

        while(1) {
                printf("main=%p, printf=%p, p=%p, i=%p\n",
                        main, printf, p, &i);
                sleep(1);
        }
        return 0;
}
```

コンパイルして、2つの端末上で実行してみる。
```
$ gcc -fPIE -o hello hello.c
```


端末1：
```
hello. pid=12952
main=0x4005f6, printf=0x7f926d215800, p=0x7f926d685010, i=0x7ffef5ed4e6c
...
```

端末2：
```
hello. pid=12980
main=0x4005f6, printf=0x7f49c1013800, p=0x7f49c1483010, i=0x7ffed73a5cfc
...
```

mainはテキストセグメント、pとiはスタック上にある。
printfのアドレスが端末1と端末2で違うのは、printfはglibcの共有オブジェクトであり、hello 実行時に、helloプログラムのスタックにロードされるから？






